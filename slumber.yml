# yaml-language-server: $schema=https://raw.githubusercontent.com/LucasPickering/slumber/refs/tags/v4.2.0/schemas/collection.json
# ^ This enables schema validation and autocomplete in your editor
# https://github.com/redhat-developer/yaml-language-server

# For basic usage info, see:
# https://slumber.lucaspickering.me/getting_started.html
# For all collection options, see:
# https://slumber.lucaspickering.me/api/request_collection/index.html

name: 223 Media Collection

# Profiles are groups of data you can easily switch between. A common usage is
# to define profiles for various environments of a REST service
profiles:
  example:
    name: Example Profile
    data:
      host: http://127.0.0.1:8080
      jwt: "{{ file('token.txt') }}"

requests:
  auth:
    name: Authentication and Authorization requests
    requests:
      login:
        name: login
        method: POST
        url: "{{ host }}/auth/login"
        body:
          type: json
          data: { "email": "batu@mail.com", "password": "Password1" }
      register:
        name: register
        method: POST
        url: "{{ host }}/auth/register"
        body:
          type: json
          data: { "email": "batu@mail.com", "password": "Password1" }

  get_medias:
    name: Get all media
    method: GET
    authentication:
      type: bearer
      token: "{{ jwt }}"
    url: "{{ host }}/media"

  create_media:
    name: Create a media collection
    url: "{{ host }}/media"
    method: POST
    authentication:
      type: bearer
      token: "{{ jwt }}"
    body:
      type: json
      data: { "title": "collection" }

  delete_media:
    name: Delete a media collection
    method: DELETE
    authentication:
      type: bearer
      token: "{{ jwt }}"
    url: "{{ host }}/media/{{ prompt() }}"

  music_media:
    name: Music
    requests:
      music_post:
        name: Add new song
        method: POST
        url: "{{ host }}/media/music"
        authentication:
          type: bearer
          token: "{{ jwt }}"
        body:
          type: json
          data:
            {
              "title": "Test Track",
              "artist": "Test Artist",
              "rating": 4,
              "duration": { "minutes": 3, "seconds": 30 },
              "media": { "id": "{{ prompt() }}" },
            }

      music_delete:
        name: Delete a song
        method: DELETE
        authentication:
          type: bearer
          token: "{{ jwt }}"
        url: "{{ host }}/media/music/{{ prompt() }}"

      music_get_all:
        name: Get all songs
        method: GET
        authentication:
          type: bearer
          token: "{{ jwt }}"
        url: "{{ host }}/media/music"

      music_get_by_id:
        name: Get song by id
        method: GET
        authentication:
          type: bearer
          token: "{{ jwt }}"
        url: "{{ host }}/media/music/{{ prompt() }}"

